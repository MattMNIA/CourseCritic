import{u as S,j as s,a as l,F as p,c as b,d as w,e as k,r as i,C as v,A as h,R as N,f as m,B as C}from"./index-DX5mPb-7.js";import{C as I,P}from"./ProfessorSearch-BsAgSYVd.js";import{c as F}from"./courseService-BtXvpxST.js";import{F as n}from"./Form-D-AHDBBl.js";const R=({course:e})=>{const a=S(),t=()=>{a(`/courses/${e.id}/reviews`)};return s.jsx(l,{className:"h-100 cursor-pointer hover-shadow",onClick:t,children:s.jsxs(l.Body,{children:[s.jsx(l.Title,{className:"d-flex justify-content-between align-items-top",children:s.jsxs("div",{children:[s.jsx("h4",{children:e.course_code}),s.jsx("h6",{children:e.course_name})]})}),s.jsxs("div",{className:"d-flex justify-content-between text-muted mt-3",children:[s.jsxs("div",{children:[s.jsx(p,{className:"me-1"}),e.difficulty?`${e.difficulty}/5`:"No ratings"]}),s.jsxs("div",{children:[s.jsx(b,{className:"me-1"}),e.workload?`${e.workload}h/week`:"N/A"]}),s.jsxs("div",{children:[s.jsx(w,{className:"me-1"}),e.usefulness?`${e.usefulness}/5`:"No ratings"]})]})]})})},E=()=>{const{currentUniversity:e}=k(),[a,t]=i.useState({courseId:"",professorId:""}),[c,u]=i.useState([]),[g,x]=i.useState(!1),[j,d]=i.useState(null),f=async r=>{if(r.preventDefault(),!e){d("Please select a university first");return}x(!0),d(null);try{const o=await F.searchCourses({...a,universityId:e.id});u(o)}catch(o){d("Failed to fetch courses. Please try again."),console.error("Search error:",o)}finally{x(!1)}},y=()=>{t({courseId:"",professorId:""}),u([])};return e?s.jsxs(v,{children:[s.jsx("h1",{className:"mb-4",children:"Find Courses"}),s.jsx(l,{className:"p-4 mb-4",children:s.jsxs(n,{onSubmit:f,children:[s.jsxs(N,{children:[s.jsx(m,{md:6,children:s.jsxs(n.Group,{className:"mb-3",children:[s.jsx(n.Label,{children:"Course"}),s.jsx(I,{onSelect:r=>t({...a,courseId:(r==null?void 0:r.id)||""})})]})}),s.jsx(m,{md:6,children:s.jsxs(n.Group,{className:"mb-3",children:[s.jsx(n.Label,{children:"Professor"}),s.jsx(P,{onSelect:r=>t({...a,professorId:(r==null?void 0:r.id)||""})})]})})]}),s.jsxs("div",{className:"d-flex gap-2",children:[s.jsx(C,{type:"submit",variant:"primary",onClick:f,children:"Search Courses"}),s.jsx(C,{variant:"outline-secondary",onClick:y,children:"Clear All"})]})]})}),g?s.jsx("div",{className:"text-center mt-4",children:"Loading..."}):j?s.jsx(h,{variant:"danger",className:"mt-4",children:j}):c.length>0?s.jsxs("div",{className:"mt-4",children:[s.jsxs("h2",{children:["Search Results (",c.length," courses found)"]}),s.jsx(N,{xs:1,md:2,lg:3,className:"g-4 mt-2",children:c.map(r=>s.jsx(m,{children:s.jsx(R,{course:r})},r.id))})]}):a.universityId&&s.jsx(h,{variant:"info",className:"mt-4",children:"No courses found matching your criteria"})]}):s.jsx(v,{children:s.jsx(h,{variant:"warning",children:"Please select a university from the navigation bar to search for courses."})})};export{E as default};
