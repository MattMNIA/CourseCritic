import{u as j,U as y,r as c,j as e,C as w,a as C,A as b,B as N,L as P,b as S}from"./index-DX5mPb-7.js";import{u as A}from"./universityService-BsMjseyU.js";import{F as r}from"./Form-D-AHDBBl.js";const D=()=>{const p=j(),{login:v}=y(),[d,n]=c.useState(!1),[u,t]=c.useState(null),[x,g]=c.useState([]),[s,i]=c.useState({email:"",password:"",confirmPassword:"",name:"",university:""});c.useEffect(()=>{(async()=>{try{const o=await A.getAllUniversities();g(o)}catch{t("Failed to fetch universities")}})()},[]);const f=async a=>{var o,m;if(a.preventDefault(),n(!0),t(null),!s.name.trim()){t("Name is required"),n(!1);return}if(!s.university){t("Please select a university"),n(!1);return}if(s.password!==s.confirmPassword){t("Passwords do not match"),n(!1);return}if(s.password.length<6){t("Password must be at least 6 characters"),n(!1);return}try{const l={email:s.email,password:s.password,name:s.name,university:parseInt(s.university)};console.log("Sending registration data:",{...l,password:"[REDACTED]"});const h=await S.register(l);console.log("Registration response:",h),v(h),p("/")}catch(l){console.error("Registration error:",l),t(((m=(o=l.response)==null?void 0:o.data)==null?void 0:m.error)||"Registration failed")}finally{n(!1)}};return e.jsx(w,{className:"d-flex justify-content-center align-items-center",style:{minHeight:"80vh"},children:e.jsxs(C,{className:"p-4",style:{maxWidth:"400px",width:"100%"},children:[e.jsx("h2",{className:"text-center mb-4",children:"Create Account"}),u&&e.jsx(b,{variant:"danger",children:u}),e.jsxs(r,{onSubmit:f,children:[e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"Full Name"}),e.jsx(r.Control,{type:"text",placeholder:"Enter your full name",value:s.name,onChange:a=>i({...s,name:a.target.value}),required:!0})]}),e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"Email address"}),e.jsx(r.Control,{type:"email",placeholder:"Enter email",value:s.email,onChange:a=>i({...s,email:a.target.value})})]}),e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"University"}),e.jsxs(r.Select,{value:s.university,onChange:a=>i({...s,university:a.target.value}),children:[e.jsx("option",{value:"",children:"Select University"}),x.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]}),e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"Password"}),e.jsx(r.Control,{type:"password",placeholder:"Password",value:s.password,onChange:a=>i({...s,password:a.target.value})})]}),e.jsxs(r.Group,{className:"mb-3",children:[e.jsx(r.Label,{children:"Confirm Password"}),e.jsx(r.Control,{type:"password",placeholder:"Confirm password",value:s.confirmPassword,onChange:a=>i({...s,confirmPassword:a.target.value})})]}),e.jsx(N,{variant:"primary",type:"submit",className:"w-100",disabled:d,children:d?"Creating Account...":"Create Account"}),e.jsx("div",{className:"text-center mt-3",children:e.jsx(P,{to:"/auth/login",className:"text-secondary",children:"Already have an account? Login"})})]})]})})};export{D as default};
